<!DOCTYPE html>
<html lang="en" class="yui-overrride">
<head>
    <meta charset="utf-8">
    <title>packages/bricksui-thirdpart/lib/bu-pagination.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1 class="blue-main-title"></h1>
        </div>
        <div class="yui3-u-1-4 version project-version">
            API Docs for: 
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/BricksUI.html">BricksUI</a></li>
            
                <li><a href="../classes/BricksUI.BuAlert.html">BricksUI.BuAlert</a></li>
            
                <li><a href="../classes/BricksUI.BuGrowlNotifications.html">BricksUI.BuGrowlNotifications</a></li>
            
                <li><a href="../classes/BricksUI.BuModal.html">BricksUI.BuModal</a></li>
            
                <li><a href="../classes/BricksUI.BuPagination.html">BricksUI.BuPagination</a></li>
            
                <li><a href="../classes/BricksUI.BuPanel.html">BricksUI.BuPanel</a></li>
            
                <li><a href="../classes/BricksUI.BuProgress.html">BricksUI.BuProgress</a></li>
            
                <li><a href="../classes/BricksUI.BuTabs.html">BricksUI.BuTabs</a></li>
            
                <li><a href="../classes/BricksUI.BuWizard.html">BricksUI.BuWizard</a></li>
            
                <li><a href="../classes/BricksUI.DynamicPageable.html">BricksUI.DynamicPageable</a></li>
            
                <li><a href="../classes/BricksUI.ENV.html">BricksUI.ENV</a></li>
            
                <li><a href="../classes/BricksUI.I18n.html">BricksUI.I18n</a></li>
            
                <li><a href="../classes/BricksUI.I18n.I18nableValidationMixin.html">BricksUI.I18n.I18nableValidationMixin</a></li>
            
                <li><a href="../classes/BricksUI.I18n.lang.html">BricksUI.I18n.lang</a></li>
            
                <li><a href="../classes/BricksUI.StateHandler.html">BricksUI.StateHandler</a></li>
            
                <li><a href="../classes/BricksUI.StaticPageable.html">BricksUI.StaticPageable</a></li>
            
                <li><a href="../classes/BricksUI.TableHeader.html">BricksUI.TableHeader</a></li>
            
                <li><a href="../classes/Ember.BuDatePicker.html">Ember.BuDatePicker</a></li>
            
                <li><a href="../classes/Ember.BuDateRange.html">Ember.BuDateRange</a></li>
            
                <li><a href="../classes/Ember.BuEditor.html">Ember.BuEditor</a></li>
            
                <li><a href="../classes/Ember.BuTree.html">Ember.BuTree</a></li>
            
                <li><a href="../classes/Ember.EasyForm.html">Ember.EasyForm</a></li>
            
                <li><a href="../classes/Ember.EasyForm.Checkbox.html">Ember.EasyForm.Checkbox</a></li>
            
                <li><a href="../classes/Ember.EasyForm.Config.html">Ember.EasyForm.Config</a></li>
            
                <li><a href="../classes/Ember.EasyForm.Radio.html">Ember.EasyForm.Radio</a></li>
            
                <li><a href="../classes/Ember.EasyForm.Select.html">Ember.EasyForm.Select</a></li>
            
                <li><a href="../classes/Ember.I18n.html">Ember.I18n</a></li>
            
                <li><a href="../classes/Ember.Validations.html">Ember.Validations</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/bricksui.html">bricksui</a></li>
            
                <li><a href="../modules/bricksui-form.html">bricksui-form</a></li>
            
                <li><a href="../modules/bricksui-i18n.html">bricksui-i18n</a></li>
            
                <li><a href="../modules/bricksui-metal.html">bricksui-metal</a></li>
            
                <li><a href="../modules/bricksui-thirdpart.html">bricksui-thirdpart</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: packages/bricksui-thirdpart/lib/bu-pagination.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*globals jQuery:true;Ember:true */
/**
 @module bricksui
 @submodule bricksui-thirdpart
 */
/**
 分页组件
 分页组件负责视图的呈现,按钮的点击全部委托给&#x60;pagerController&#x60;,所以必须给分页组件
 配置&#x60;pagerController&#x60;这个属性
 ####用法
 * &#x60;numberOfPages&#x60;  显示的页码个数
 * &#x60;pagerController&#x60; 当前分页组件的控制器,必须配置,并且该控制器必须集成&#x60;BricksUI.DynamicPageable&#x60;
 &#x60;&#x60;&#x60;html
 {{bu-pagination numberOfPages=5 pagerControllerBinding=&quot;controller&quot;}}
 &#x60;&#x60;&#x60;

 @type {Ember.Component}
 @namespace BricksUI
 @class BuPagination
 @extends Ember.Component
 */
var BuPagination = Ember.Component.extend({
    init: function () {
        var pagerController = this.get(&quot;pagerController&quot;);
        Ember.assert(&quot;pagerController must be provided&quot;, pagerController);
        if (!pagerController.get(&#x27;store&#x27;)) {
            pagerController.set(&#x27;store&#x27;, this.get(&#x27;store&#x27;));
        }
        this._super.apply(this, arguments);
    },
    /**
     * 默认的模板
     * @property layoutName
     * @type {[type]}
     * @default bu-pagination
     */
    layoutName: &quot;bu-pagination&quot;,

    /**
     * 分页组件可显示的页码个数
     * @property numberOfPages
     * @type {Number}
     * @default 10
     */
    numberOfPages: 10,

    /**
     * 计算属性--&gt;&#x27;&#x60;pagerController.totalPages&#x60; &#x60;agerController.currentPage&#x60;
     * 用于生成页码
     * &#x60;&#x60;&#x60;html
     *  First Prev 8 9 10 11 12 |13| 14 15 16 17 Next Last
     *  First Prev 80 81 82 83 84 85 86 |87| 88 89 90 91 92 93 94 Next Last
     * &#x60;&#x60;&#x60;
     * @property pages
     * @return {Array}
     */
    pages: function () {
        var result = [],
            totalPages = this.get(&#x27;pagerController.totalPages&#x27;),
            currentPage = this.get(&#x27;pagerController.currentPage&#x27;),
            length = (totalPages &gt;= this.get(&#x27;numberOfPages&#x27;)) ? this.get(&#x27;numberOfPages&#x27;) : totalPages,
            startPos;

        // If only one page, don&#x27;t show pagination
        if (totalPages === 1)
            return;

        /*
         * Figure out the starting point.
         *
         * If current page is &lt;= 6, then start from 1, else FFIO
         */
        if (currentPage &lt;= Math.floor(this.get(&#x27;numberOfPages&#x27;) / 2) + 1 || totalPages &lt;= this.get(&#x27;numberOfPages&#x27;)) {
            startPos = 1;
        } else {
            // Check to see if in the last section of pages
            if (currentPage &gt;= totalPages - (Math.ceil(this.get(&#x27;numberOfPages&#x27;) / 2) - 1)) {
                // Start pages so that the total number of pages is shown and the last page number is the last page
                startPos = totalPages - ((this.get(&#x27;numberOfPages&#x27;) - 1));
            } else {
                // Start pages so that current page is in the center
                startPos = currentPage - (Math.ceil(this.get(&#x27;numberOfPages&#x27;) / 2) - 1);
            }
        }

        // Go through all of the pages and make an entry into the array
        for (var i = 0; i &lt; length; i++)
            result.push(i + startPos);

        return result;
    }.property(&#x27;pagerController.totalPages&#x27;, &#x27;pagerController.currentPage&#x27;),

    /**
     * 计算属性,首页按钮是否不可用
     * @property disableFirst
     * @type {Boolean}
     */
    disableFirst: Ember.computed.alias(&quot;disablePrev&quot;),
    /**
     * 计算属性,前一页按钮是否不可用
     * @property disableFirst
     * @return {Boolean}
     */
    disablePrev: function () {
        return this.get(&#x27;pagerController.currentPage&#x27;) === 1;
    }.property(&#x27;pagerController.currentPage&#x27;),

    /**
     * 计算属性,后一页按钮是否不可用
     * @property disableFirst
     * @return {Boolean}
     */
    disableNext: function () {
        return this.get(&#x27;pagerController.currentPage&#x27;) === this.get(&#x27;pagerController.totalPages&#x27;);
    }.property(&#x27;pagerController.currentPage&#x27;, &#x27;pagerController.totalPages&#x27;),
    /**
     * 计算属性,尾页按钮是否不可用
     * @property disableFirst
     * @return {Boolean}
     */
    disableLast: Ember.computed.alias(&quot;disableNext&quot;),
    actions: {
        /**
         * 第一页
         * @method firstPage
         */
        firstPage: function () {
            if (!this.get(&#x27;disableFirst&#x27;)) {
                this.get(&#x27;pagerController&#x27;).send(&#x27;firstPage&#x27;);
            }
        },
        /**
         * 前一页
         * @method prevPage
         */
        prevPage: function () {
            if (!this.get(&#x27;disablePrev&#x27;)) {
                this.get(&#x27;pagerController&#x27;).send(&#x27;prevPage&#x27;);
            }
        },

        /**
         * 后一页
         * @method nextPage
         */
        nextPage: function () {
            if (!this.get(&#x27;disableLast&#x27;)) {
                this.get(&#x27;pagerController&#x27;).send(&#x27;nextPage&#x27;);
            }
        },
        /**
         * 尾页
         * @method lastPage
         */
        lastPage: function () {
            if (!this.get(&#x27;disableLast&#x27;)) {
                this.get(&#x27;pagerController&#x27;).send(&#x27;lastPage&#x27;);
            }
        }
    },

    /**
     * 按钮视图
     * @property PageButton
     * @type {Ember.View}
     */
    PageButton: Ember.View.extend({
        // Bootstrap page buttons are li elements
        tagName: &#x27;li&#x27;,

        // Bind to is current to show the button as active
        classNameBindings: [&#x27;isCurrent&#x27;],

        actions: {
            /**
             * @private
             */
            goToPage: function () {
                // Change the page
                this.set(&#x27;parentView.pagerController.currentPage&#x27;, this.get(&#x27;content&#x27;));
                var pagerController = this.get(&#x27;parentView.pagerController&#x27;);
                constrain(pagerController.doLoad(((this.get(&#x27;content&#x27;) - 1) * pagerController.get(&#x27;perPage&#x27;)), 0, pagerController.getTotalCount()));
            }
        },

        /**
         * Computed property to see if the button is active
         * @return {Boolean}
         */
        isCurrent: function () {
            return this.get(&#x27;content&#x27;) === this.get(&#x27;parentView.pagerController.currentPage&#x27;) ? &#x27;active&#x27; : &#x27;&#x27;;
        }.property(&#x27;parentView.pagerController.currentPage&#x27;)
    })
});
var constrain = function (self, min, max) {
    Math.min(Math.max(self, min), max);
};
/**
 表格行头
 @type {Ember.View}
 @namespace BricksUI
 @class TableHeader
 @extends Ember.View
 */
var TableHeader = Ember.View.extend({
    /**
     * @private
     */
    defaultTemplate: Ember.Handlebars.compile(&#x27;{{view.text}}&#x27;),

    /**
     * It&#x27;s a header, so render it as a th
     * @type {String}
     */
    tagName: &#x27;th&#x27;,

    /**
     * Mark the view as clickable
     * @type {Array}
     */
    classNames: [&#x27;clickable&#x27;],

    /**
     * Define the bound classes.  Used to say if the header is the active sort
     * and what direction the sort is.
     * @type {Array}
     */
    classNameBindings: [&#x27;isCurrent:active&#x27;, &#x27;isAscending:ascending&#x27;, &#x27;isDescending:descending&#x27;],

    /**
     * 该行头所代表的属性名称
     * @property propertyName
     */
    propertyName: &#x27;&#x27;,

    /**
     * Text to be rendered to the view
     * @type {String}
     */
    text: &#x27;&#x27;,

    /**
     * 点击事件,用于调用controller进行排序
     * @method click
     */
    click: function (event) {
        this.get(&#x27;controller&#x27;).sortByProperty(this.get(&#x27;propertyName&#x27;));
    },

    /**
     * Computed property for checking to see if the header is the current sort
     * or not.
     *
     * @return {Boolean}
     */
    isCurrent: function () {
        return this.get(&#x27;controller.sortBy&#x27;) === this.get(&#x27;propertyName&#x27;);
    }.property(&#x27;controller.sortBy&#x27;),

    /**
     * 升序
     * @property isAscending
     */
    isAscending: function () {
        return this.get(&#x27;isCurrent&#x27;) &amp;&amp; this.get(&#x27;controller.sortDirection&#x27;) === &#x27;ascending&#x27;;
    }.property(&#x27;controller.sortDirection&#x27;, &#x27;isCurrent&#x27;),

    /**
     * 降序
     * @property isAscending
     */
    isDescending: function () {
        return this.get(&#x27;isCurrent&#x27;) &amp;&amp; this.get(&#x27;controller.sortDirection&#x27;) === &#x27;descending&#x27;;
    }.property(&#x27;controller.sortDirection&#x27;, &#x27;isCurrent&#x27;)
});

export {
    BuPagination,
    TableHeader
    };

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
